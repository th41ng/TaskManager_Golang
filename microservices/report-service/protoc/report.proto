syntax = "proto3";

package report;

// Go package cho gRPC codegen
option go_package = "taskmanager/microservices/report-service/pb;pb";

// ReportService cung cấp thống kê task toàn hệ thống
service ReportService {
  // Lấy báo cáo tổng quan task
  rpc GetTaskReport (ReportRequest) returns (ReportResponse);
}

// Request cho báo cáo
message ReportRequest {
  // Có thể lọc theo user hoặc project (tùy nhu cầu)
  int32 user_id = 1;
  int32 project_id = 2;
}

// Response thống kê task
message ReportResponse {
  TaskStats stats = 1;
}

// Thông tin chi tiết thống kê task
message TaskStats {
  int32 total_tasks = 1;               // Tổng số task
  int32 completed_tasks = 2;           // Số task đã hoàn thành
  int32 pending_tasks = 3;             // Số task chưa hoàn thành
  map<int32, int32> tasks_per_project = 4;  // project_id -> số lượng task
  map<int32, int32> tasks_per_priority = 5; // priority -> số lượng task
  map<int32, int32> tasks_per_user = 6;     // user_id -> số lượng task
}
